name: Femjoy
sceneByName:
  action: scrapeXPath
  queryURL: "https://www.femjoy.com/videos?s={}"
  scraper: sceneSearch

sceneByQueryFragment:
  action: scrapeXPath
  queryURL: "{url}"
  scraper: sceneScraper

sceneByURL:
  - action: scrapeXPath
    url:
      - femjoy.com
    scraper: sceneScraper

xPathScrapers:
  sceneSearch:
    common:
      $scene: //div[contains(concat(' ', normalize-space(@class), ' '), ' _results_item ') and contains(concat(' ', normalize-space(@class), ' '), ' _results_posts_item ')]
    scene:
      Title:
        selector: $scene//a[@class='preview']/@title
      Date:
        selector: $scene//span[@class='posted_on']/text()
        postProcess: 
          - replace:
              - regex: .+on\s(.+)
                with: $1
          - parseDate: Jan 2, 2006             
      URL:
        selector: $scene//a[@class='preview']/@href
        postProcess:
          - replace:
              - regex: ^
                with: "https://www.femjoy.com"
      Image:
        selector: $scene//img[contains(concat(' ', normalize-space(@class), ' '), ' _image ') and contains(concat(' ', normalize-space(@class), ' '), ' item_cover ')]/@src

  sceneScraper:
    scene:
      Title: //div[@class='post_details']/h1[@class='post_title']/span/text()
      Studio: 
        Name: 
          fixed: Femjoy
      Date: 
        selector: //div[@class='post_details']/h2[@class='post_title']
        postProcess: 
          - replace:
              - regex: .+on\s(.+)
                with: $1
          - parseDate: Jan 2, 2006             
      Performers: 
        Name: //div[@class='post_details']/h1[@class='post_title']/a[contains(@href,"/models/")]
        URL: //div[@class='post_details']/h1[@class='post_title']/a[contains(@href,"/models/")]/@href        
      URL:
        selector: //meta[@property="og:url"]/@content
        postProcess:
          - replace:
              - regex: .*\/
                with: "https://www.femjoy.com/post/"
      Image:
        selector: //div[@class='post_details']/h1[@class='post_title']//text()
        concat: " "
        postProcess:
          - replace:
              - regex: ( in| Add Video to favorites)
                with: ''
              - regex: \s
                with: "%2b" # works better than adding plain + or %20
              - regex: ^
                with: "https://www.femjoy.com/videos?s="
          - subScraper: //img[@class="_image item_cover"]/@src
      Details: //div[@class='post_details']/h2[@class='post_description']/p

# Last Updated November 03, 2022
